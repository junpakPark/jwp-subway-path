# jwp-subway-path

### 미션 구현 순서

- API 레벨의 **통합 테스트를 구현**하여 내가 구현할 API의 큰 그림을 그리기
- **비즈니스 규칙**을 만족하는 **설계를 진행**하기
- 설계한 요구사항을 검증할 수 있는 **작은 단위의 테스트를 작성**하기
- 작은 단위의 **테스트를 만족시키는 코드를 구현**하기

## 추가된 프로그래밍 요구 사항

- 데이터베이스 설정을 프로덕션과 테스트를 다르게 합니다.
    - 프로덕션의 데이터베이스는 로컬에 저장될 수 있도록 설정
    - 테스트용 데이터베이스는 인메모리로 동작할 수 있도록 설정

## 2단계 추가된 기능 요구사항

- [x]  경로 조회 API 구현
    - 출발역과 도착역 사이의 최단 거리 경로를 구하는 API를 구현합니다.
    - 최단 거리 경로와 함께 총 거리 정보를 함께 응답합니다.
    - 한 노선에서 경로 찾기 뿐만 아니라 여러 노선의 환승도 고려합니다.
- [x]  요금 조회 기능 추가
    - 경로 조회 시 요금 정보를 포함하여 응답합니다.

### 경로 조회 API 프로세스

| HTTP Method | URL    | 설명                   | HTTP Status |
|-------------|--------|----------------------|-------------|
| get         | /paths | 경로 조회 (@RequestBody) | 200         |

- [x] 경로 조회
    - [x] `GET /paths`
        - `@RequsetBody` → 출발역, 도착역
    - [x] 두 역이 동일한 역인지 여부 검증
    - [x] DB에 해당 역 존재 여부 확인
    - [x] 모든 노선의 구간 찾기
    - [x] PathFinder를 통해 Path 구하기
    - [x] 거리에 따른 요금 계산하기
    - [x] DTO로 변환
    - [x] Response로 응답


- 요금 계산 방법
    - 지하철 운임은 거리비례제로 책정됩니다. (실제 경로가 아닌 최단거리 기준)
    - 기본운임(10㎞ 이내): 기본운임 1,250원
    - 이용 거리 초과 시 추가운임 부과
        - 10km~50km: 5km 까지 마다 100원 추가
        - 50km 초과: 8km 까지 마다 100원 추가
